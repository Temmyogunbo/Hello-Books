{"version":3,"sources":["webpack:///./client/app/src/components/users/AdminBooks.jsx"],"names":["AdminBooks","props","state","book","books","onClickEditBook","bind","$","document","ready","modal","nextProps","setState","event","preventDefault","bookId","target","parentNode","id","find","parseInt","console","log","title","text","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","deleteBook","deleteMessage","bookDeleted","msg","getAllBooks","error","catch","noop","categories","bookItems","map","index","category","author","quantity","handleDelete","Component","PropTypes","object","isRequired","func"],"mappings":"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","file":"0.ab1504953b5f67c668d0.hot-update.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport swal from 'sweetalert2';\nimport BookForm from './BookForm';\n\n\nclass AdminBooks extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      book: {},\n      books: []\n    }\n    this.onClickEditBook = this.onClickEditBook.bind(this);\n  }\n  componentDidMount() {\n    $(document).ready(function () {\n      $('#modal').modal();\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.books !== this.props.books) {\n      this.setState({ books: nextProps.books })\n    }\n  }\n\n  onClickEditBook(event) {\n    event.preventDefault();\n    const bookId = event.target.parentNode.id;\n    const book = this.props.books.find(book => parseInt(book.id, 10) === parseInt(bookId, 10));\n    this.setState({\n      book: book\n    });\n    $('#modal').modal('open');\n    console.log(book);\n  }\n\n  handleDelete(book) {\n    swal({\n      title: 'Delete this book?',\n      text: \"You won't be able to revert this!\",\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Yes, delete it!'\n    }).then(() => {\n      this.props.deleteBook(book.id)\n        .then(() => {\n          if (this.props.deleteMessage.bookDeleted) {\n            swal(this.props.deleteMessage.deleteMessage.msg)\n            return this.props.getAllBooks();\n          }\n          swal(this.props.deleteMessage.error.msg);\n        });\n    }).catch(swal.noop);\n  }\n\n  render() {\n    console.log('coming from dashs', this.props.categories)\n    let bookItems;\n    if (this.state.books) {\n      bookItems = this.state.books.map((book, index) => (\n        <tr key={book.id}>\n          <th>{index + 1}</th>\n          <th>{book.category}</th>\n          <th>{book.author}</th>\n          <th>{book.title}</th>\n          <th>{book.quantity}</th>\n          <th id={book.id}>\n            <a className=\"waves-effect waves-light\" onClick={this.onClickEditBook}>\n              +\n          </a>\n          </th>\n          <th>\n            <a className=\"link-color\" onClick={() => { this.handleDelete.bind(this)(book) }}>\n              <i className=\"fa fa-trash-o\" aria-hidden=\"true\"></i>\n            </a>\n          </th>\n        </tr>\n      ));\n    }\n    return (\n      <div>\n        <BookForm\n        book={this.state.book}\n        categories={this.props.categories}/>\n        <div className=\"btn-edit-add\">\n          <div>\n            <a className=\"waves-effect waves-light btn modal-trigger\" href=\"#modal\">\n              AD BOOK\n            </a>\n          </div>\n        </div>\n        <div>\n          <table className=\"bordered centered admin-books\">\n            <thead>\n              <tr>\n                <th>S/N</th>\n                <th>Category</th>\n                <th>Author</th>\n                <th>Title</th>\n                <th>Quantity</th>\n                <th></th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody>\n              {bookItems}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nAdminBooks.PropTypes = {\n  bookItems: PropTypes.object.isRequired,\n  map: PropTypes.func.isRequired\n};\n\nexport default AdminBooks;\n\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/src/components/users/AdminBooks.jsx"],"sourceRoot":""}